{% extends 'base.html' %}

{% block upper_left %}
    <div class="nav-container">
        <a class="upper-left" href="{{ url_for('overview') }}">Continue Game</a>
        <span class="separator">|</span>
        <a class="upper-left" href="{{ url_for('save_to_file') }}">Save to File</a>
        <span class="separator">|</span>
        <a class="upper-left" href="{{ url_for('load_from_file') }}">Load from File</a>
    </div>
    {% if file_message %}
        <p>{{ file_message }}</p>
    {% endif %}
{% endblock %}

{% block content %}
    <h1>Game Setup</h1>
    <center><a href="{{ url_for('browse_scenarios') }}"><button>Browse Example Scenarios</button></a></center>
    <div class="entitylist-container">
        <a href="{{ url_for('configure_overall') }}">Overall Settings</a>
    </div>
    <div class="flexdiv">
        {% if game.items %}
            <div class="select-box">
                <select id="item-select">
                    {% for item in game.items %}
                        <option value="{{ item.id }}">{{ item.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modify-button">
                <button onclick="configureSelected('item')">Modify Item</button>
            </div>
        {% else %}
            <p class="no-items">(No items)</p>
        {% endif %}
        <div class="entitylist-container">
            <a href="/configure/item/new">Add New</a>
        </div>
    </div>
    <div class="flexdiv">
        {% if game.locations %}
            <div class="select-box">
                <select id="location-select">
                    {% for location in game.locations %}
                        <option value="{{ location.id }}">{{ location.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modify-button">
                <button onclick="configureSelected('location')">Modify Location</button>
            </div>
        {% else %}
            <p class="no-items">(No locations)</p>
        {% endif %}
        <div class="entitylist-container">
            <a href="/configure/location/new">Add New</a>
        </div>
    </div>
    <div class="flexdiv">
        {% if game.characters %}
            <div class="select-box">
                <select id="char-select">
                    {% for char in game.characters %}
                        <option value="{{ char.id }}">{{ char.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modify-button">
                <button onclick="configureSelected('char')">Modify Character</button>
            </div>
        {% else %}
            <p class="no-items">(No characters)</p>
        {% endif %}
        <div class="entitylist-container">
            <a href="/configure/char/new">Add New</a>
        </div>
    </div>
    <div class="flexdiv">
        {% if game.attribs %}
            <div class="select-box">
                <select id="attrib-select">
                    {% for attrib in game.attribs %}
                        <option value="{{ attrib.id }}">{{ attrib.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modify-button">
                <button onclick="configureSelected('attrib')">Modify Attribute</button>
            </div>
        {% else %}
            <p class="no-items">(No attributes)</p>
        {% endif %}
        <div class="entitylist-container">
            <a href="/configure/attrib/new">Add New</a>
        </div>
    </div>
    <div class="flexdiv">
        {% if game.events %}
            <div class="select-box">
                <select id="event-select">
                    {% for event in game.events %}
                        <option value="{{ event.id }}">{{ event.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modify-button">
                <button onclick="configureSelected('event')">Modify Event</button>
            </div>
        {% else %}
            <p class="no-items">(No events)</p>
        {% endif %}
        <div class="entitylist-container">
            <a href="/configure/event/new">Add New</a>
        </div>
    </div>
    <script>
        function configureSelected(type) {
            var selectedId = $("#" + type + "-select").val();
            if (selectedId) {
                window.location.href = "/configure/" + type + "/" + selectedId;
            }
        }
    </script>
{% endblock %}
